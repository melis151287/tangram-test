<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>O Desafio dos Ge√¥metras de Tangram√≥polis</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      color: #222;
      background-image: url('fundo-floresta-geometrica.png');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-repeat: no-repeat;
    }

    header {
      text-align: center;
      padding: 20px 10px;
      background: linear-gradient(135deg, #4256b8, #8a4dd9);
      color: #ffffff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.25);
    }

    header h1 {
      margin: 0;
      font-size: 1.9rem;
    }

    header p {
      margin: 8px 0 0;
      font-size: 0.95rem;
    }

    main {
      max-width: 1000px;
      margin: 20px auto 40px;
      padding: 0 10px 30px;
      background: rgba(255,255,255,0.88);
      border-radius: 18px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.25);
    }

    .intro-box {
      background: #ffffff;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.10);
      margin: 15px 10px 20px;
      font-size: 0.95rem;
      border-left: 6px solid #ffb300;
    }

    .intro-box strong {
      color: #d35400;
    }

    .level-title {
      margin: 25px 10px 10px;
      font-size: 1.15rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .level-badge {
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      color: #fff;
      font-weight: bold;
      text-transform: uppercase;
    }

    .level-mestre { background: #2e7d32; }
    .level-princesa { background: #c2185b; }
    .level-feiticeiro { background: #6a1b9a; }

    .question-card {
      display: flex;
      gap: 12px;
      background: #ffffff;
      border-radius: 14px;
      padding: 12px;
      margin: 0 10px 16px;
      box-shadow: 0 3px 7px rgba(0,0,0,0.12);
      border-left: 6px solid transparent;
      position: relative;
      overflow: hidden;
    }

    .question-card::after {
      content: "";
      position: absolute;
      right: -40px;
      bottom: -40px;
      width: 90px;
      height: 90px;
      opacity: 0.1;
      background: radial-gradient(circle, #ffffff, transparent 60%);
    }

    .question-card[data-character="mestre"] {
      border-left-color: #2e7d32;
      background: linear-gradient(90deg, #e8f5e9, #ffffff);
    }

    .question-card[data-character="princesa"] {
      border-left-color: #c2185b;
      background: linear-gradient(90deg, #fce4ec, #ffffff);
    }

    .question-card[data-character="feiticeiro"] {
      border-left-color: #6a1b9a;
      background: linear-gradient(90deg, #f3e5f5, #ffffff);
    }

    .question-card.locked {
      display: none;
    }

    .avatar {
      flex: 0 0 80px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }

    .avatar img {
      width: 76px;
      height: 76px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #ffffff;
      box-shadow: 0 2px 5px rgba(0,0,0,0.25);
      background: #f5f5f5;
    }

    .content {
      flex: 1;
    }

    .speech-bubble {
      background: #f5f7ff;
      border-radius: 12px;
      padding: 10px 12px;
      position: relative;
      margin-bottom: 8px;
      font-size: 0.95rem;
    }

    .question-card[data-character="mestre"] .speech-bubble {
      background: #edf7ee;
    }

    .question-card[data-character="princesa"] .speech-bubble {
      background: #fde4f0;
    }

    .question-card[data-character="feiticeiro"] .speech-bubble {
      background: #f3e6ff;
    }

    .speech-bubble::before {
      content: "";
      position: absolute;
      left: -8px;
      top: 18px;
      width: 0;
      height: 0;
      border-top: 8px solid transparent;
      border-bottom: 8px solid transparent;
      border-right: 8px solid #f5f7ff;
    }

    .question-card[data-character="mestre"] .speech-bubble::before {
      border-right-color: #edf7ee;
    }

    .question-card[data-character="princesa"] .speech-bubble::before {
      border-right-color: #fde4f0;
    }

    .question-card[data-character="feiticeiro"] .speech-bubble::before {
      border-right-color: #f3e6ff;
    }

    .character-name {
      font-weight: bold;
      margin-bottom: 4px;
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .question-stem {
      margin: 4px 0;
    }

    .options {
      margin-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .option-btn {
      text-align: left;
      border: 1px solid #c1c9ff;
      background: #e6ebff;
      border-radius: 8px;
      padding: 6px 8px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.2s, transform 0.05s, box-shadow 0.1s;
    }

    .option-btn:hover {
      background: #d7e0ff;
      box-shadow: 0 1px 3px rgba(0,0,0,0.15);
    }

    .option-btn:active {
      transform: scale(0.98);
    }

    .option-btn.correct {
      background: #c8f7c5;
      border-color: #4caf50;
    }

    .option-btn.incorrect {
      background: #ffd6d6;
      border-color: #f44336;
    }

    .feedback {
      margin-top: 6px;
      font-size: 0.85rem;
      font-weight: bold;
      min-height: 18px;
    }

    .feedback.ok {
      color: #2e7d32;
    }

    .feedback.no {
      color: #c62828;
    }

    .unlock-hint {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-top: 2px;
    }

    .unlock-hint span {
      color: #ff6f00;
      font-weight: bold;
    }

    #final-message {
      margin: 30px 12px 10px;
      text-align: center;
    }

    #final-card {
      background: rgba(255,255,255,0.98);
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.25);
      border-left: 6px solid #ff9800;
    }

    #final-card p {
      margin: 6px 0;
      font-size: 0.97rem;
      font-weight: bold;
    }

    #final-card img {
      max-width: 100%;
      border-radius: 12px;
      margin-top: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.25);
    }

    #restart-btn {
      margin-top: 18px;
      display: inline-block;
      background: #3949ab;
      color: #fff;
      padding: 10px 20px;
      border-radius: 10px;
      border: none;
      font-size: 0.95rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.25);
    }

    #restart-btn:hover {
      background: #283593;
    }

    @media (max-width: 700px) {
      main {
        border-radius: 0;
        margin: 0;
      }

      .question-card {
        flex-direction: column;
        align-items: stretch;
      }

      .avatar {
        justify-content: flex-start;
      }

      .speech-bubble::before {
        left: 18px;
        top: -8px;
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        border-bottom: 8px solid #f5f7ff;
        border-top: none;
      }
    }
  </style>
</head>
<body>
<header>
  <h1>O Desafio dos Ge√¥metras de Tangram√≥polis</h1>
  <p>Responda aos desafios do Mestre Q. Uadrado, da Princesa P. Er√≠metro e do Feiticeiro A.R.E.A. e prove que domina a conserva√ß√£o de √°rea no tangram!</p>
</header>

<main>
  <div class="intro-box">
    <p><strong>Hist√≥ria:</strong> A Pra√ßa Central de Tangram√≥polis foi quebrada em 7 Pe√ßas M√°gicas. Sua miss√£o √© mostrar, desafio a desafio, que mesmo mudando a forma das figuras, a √°rea pode permanecer a mesma.</p>
    <p>As quest√µes aparecem em sequ√™ncia: <strong>voc√™ s√≥ avan√ßa para o pr√≥ximo desafio quando acerta o atual</strong>. Leia o enunciado, escolha uma alternativa e veja o coment√°rio do personagem abaixo.</p>
  </div>

  <!-- ================== N√çVEL MESTRE ================== -->
  <h2 class="level-title">
    <span class="level-badge level-mestre">N√≠vel M ‚Äì Mestre Q. Uadrado</span>
    <span>Propriedades b√°sicas e identifica√ß√£o</span>
  </h2>

  <!-- M1 -->
  <div class="question-card" data-correct="c" data-character="mestre">
    <div class="avatar">
      <img src="mestre_quadrado.png" alt="Mestre Q. Uadrado">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Mestre Q. Uadrado:</div>
        <div class="question-stem">
          ‚ÄúJovem Ge√¥metra, para reconstruir a Pra√ßa Central, voc√™ precisa conhecer suas pe√ßas. O quadrado do tangram pode ser decomposto em quantas e quais Pe√ßas M√°gicas?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) Duas pe√ßas id√™nticas, ambas quadrados menores.</button>
          <button class="option-btn" data-option="b">b) Duas pe√ßas triangulares de mesma √°rea.</button>
          <button class="option-btn" data-option="c">c) Sete pe√ßas, sendo 5 tri√¢ngulos de diferentes tamanhos, 1 quadrado e 1 paralelogramo.</button>
          <button class="option-btn" data-option="d">d) Qualquer n√∫mero de pe√ßas, dependendo da vontade do jogador.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o pr√≥ximo desafio.</div>
    </div>
  </div>

  <!-- M2 -->
  <div class="question-card locked" data-correct="b" data-character="mestre">
    <div class="avatar">
      <img src="mestre_quadrado.png" alt="Mestre Q. Uadrado">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Mestre Q. Uadrado:</div>
        <div class="question-stem">
          ‚ÄúAlguns aprendizes dizem que, juntando apenas os tri√¢ngulos, j√° conseguimos o quadrado original. Isso √© verdade em Tangram√≥polis?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) Verdadeira, porque a maior parte do tangram √© formada por tri√¢ngulos.</button>
          <button class="option-btn" data-option="b">b) Falsa, porque, mesmo juntando os tri√¢ngulos, ainda faltam o quadrado e o paralelogramo para completar a √°rea total.</button>
          <button class="option-btn" data-option="c">c) Verdadeira apenas se os tri√¢ngulos forem reorganizados como paralelogramos.</button>
          <button class="option-btn" data-option="d">d) Verdadeira apenas se os tri√¢ngulos estiverem rotacionados da maneira correta.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o pr√≥ximo desafio.</div>
    </div>
  </div>

  <!-- M3 -->
  <div class="question-card locked" data-correct="a" data-character="mestre">
    <div class="avatar">
      <img src="mestre_quadrado.png" alt="Mestre Q. Uadrado">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Mestre Q. Uadrado:</div>
        <div class="question-stem">
          ‚ÄúQuando voc√™ gira ou arrasta uma Pe√ßa M√°gica do tangram, o que acontece com a √°rea dessa pe√ßa?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) As pe√ßas podem ser rearranjadas sem alterar sua √°rea individual.</button>
          <button class="option-btn" data-option="b">b) As pe√ßas podem ter a √°rea alterada quando s√£o rotacionadas.</button>
          <button class="option-btn" data-option="c">c) A decomposi√ß√£o altera o valor da √°rea de cada pe√ßa.</button>
          <button class="option-btn" data-option="d">d) A decomposi√ß√£o s√≥ √© poss√≠vel quando a figura final √© um quadrado.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o pr√≥ximo desafio.</div>
    </div>
  </div>

  <!-- M4 -->
  <div class="question-card locked" data-correct="c" data-character="mestre">
    <div class="avatar">
      <img src="mestre_quadrado.png" alt="Mestre Q. Uadrado">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Mestre Q. Uadrado:</div>
        <div class="question-stem">
          ‚ÄúUm Guardi√£o confundiu os s√≠mbolos da bandeira de Tangram√≥polis e disse: ‚ÄòTodo losango √© um quadrado!‚Äô Qual √© a rela√ß√£o correta entre quadrado e losango?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) Todo losango tem quatro lados iguais e quatro √¢ngulos retos.</button>
          <button class="option-btn" data-option="b">b) Todo losango √© um quadrado.</button>
          <button class="option-btn" data-option="c">c) Todo quadrado √© um tipo especial de losango, mas nem todo losango √© quadrado.</button>
          <button class="option-btn" data-option="d">d) Losango √© um quadril√°tero com lados diferentes e apenas um par de lados paralelos.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o pr√≥ximo desafio.</div>
    </div>
  </div>

  <!-- M5 -->
  <div class="question-card locked" data-correct="a" data-character="mestre">
    <div class="avatar">
      <img src="mestre_quadrado.png" alt="Mestre Q. Uadrado">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Mestre Q. Uadrado:</div>
        <div class="question-stem">
          ‚ÄúAo montar um ret√¢ngulo com as pe√ßas do tangram, um aluno perguntou: ‚ÄòSer√° que todo ret√¢ngulo √© um paralelogramo mesmo?‚Äô O que voc√™ responde?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) Todo ret√¢ngulo √© um paralelogramo, pois tem dois pares de lados opostos paralelos e quatro √¢ngulos retos.</button>
          <button class="option-btn" data-option="b">b) Ret√¢ngulo √© qualquer quadril√°tero que tenha pelo menos um √¢ngulo reto.</button>
          <button class="option-btn" data-option="c">c) Todo ret√¢ngulo √© um quadrado.</button>
          <button class="option-btn" data-option="d">d) Nenhum ret√¢ngulo pode ser formado com pe√ßas de tangram.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o pr√≥ximo desafio.</div>
    </div>
  </div>

  <!-- ================== N√çVEL PRINCESA ================== -->
  <h2 class="level-title">
    <span class="level-badge level-princesa">N√≠vel P ‚Äì Princesa P. Er√≠metro</span>
    <span>Conserva√ß√£o de √°rea e composi√ß√£o de figuras</span>
  </h2>

  <!-- P1 -->
  <div class="question-card locked" data-correct="b" data-character="princesa">
    <div class="avatar">
      <img src="princesa_perimetro.png" alt="Princesa P. Er√≠metro">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Princesa P. Er√≠metro:</div>
        <div class="question-stem">
          ‚ÄúReorganizei todas as 7 Pe√ßas M√°gicas para formar um gato. O que acontece com a √°rea total da figura em rela√ß√£o √† Pra√ßa Central original?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) A √°rea total da figura aumenta porque as pe√ßas mudam de formato.</button>
          <button class="option-btn" data-option="b">b) A √°rea total permanece a mesma, pois n√£o h√° cortes adicionais nem sobreposi√ß√£o.</button>
          <button class="option-btn" data-option="c">c) A √°rea diminui, j√° que muda o contorno da figura.</button>
          <button class="option-btn" data-option="d">d) A √°rea depende da cor escolhida para a figura.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o pr√≥ximo desafio.</div>
    </div>
  </div>

  <!-- P2 -->
  <div class="question-card locked" data-correct="a" data-character="princesa">
    <div class="avatar">
      <img src="princesa_perimetro.png" alt="Princesa P. Er√≠metro">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Princesa P. Er√≠metro:</div>
        <div class="question-stem">
          ‚ÄúSe um construtor usa apenas 4 pe√ßas do tangram para criar um templo retangular, qual √© a √°rea desse novo templo?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) A √°rea √© igual √† soma das √°reas das 4 pe√ßas utilizadas.</button>
          <button class="option-btn" data-option="b">b) A √°rea √© igual √† √°rea do tangram inteiro.</button>
          <button class="option-btn" data-option="c">c) A √°rea depende da forma escolhida, n√£o da quantidade de pe√ßas.</button>
          <button class="option-btn" data-option="d">d) A √°rea √© sempre o dobro da √°rea do paralelogramo.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o pr√≥ximo desafio.</div>
    </div>
  </div>

  <!-- P3 -->
  <div class="question-card locked" data-correct="a" data-character="princesa">
    <div class="avatar">
      <img src="princesa_perimetro.png" alt="Princesa P. Er√≠metro">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Princesa P. Er√≠metro:</div>
        <div class="question-stem">
          ‚ÄúUm decreto em Tangram√≥polis diz: ‚ÄòSe duas figuras diferentes usam exatamente as mesmas pe√ßas, ent√£o elas t√™m a mesma √°rea.‚Äô Essa frase √© verdadeira? Por qu√™?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) Verdadeira, porque a √°rea depende da soma da √°rea das pe√ßas, n√£o da forma.</button>
          <button class="option-btn" data-option="b">b) Falsa, porque figuras diferentes sempre t√™m √°reas diferentes.</button>
          <button class="option-btn" data-option="c">c) Verdadeira apenas se ambas forem convexas.</button>
          <button class="option-btn" data-option="d">d) Verdadeira apenas quando as pe√ßas formam um pol√≠gono regular.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o pr√≥ximo desafio.</div>
    </div>
  </div>

  <!-- P4 -->
  <div class="question-card locked" data-correct="c" data-character="princesa">
    <div class="avatar">
      <img src="princesa_perimetro.png" alt="Princesa P. Er√≠metro">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Princesa P. Er√≠metro:</div>
        <div class="question-stem">
          ‚ÄúAo montar uma figura diferente com as mesmas pe√ßas, percebo que o contorno externo (per√≠metro) pode mudar bastante. O que acontece com a √°rea total?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) A forma final determina a √°rea da figura.</button>
          <button class="option-btn" data-option="b">b) A √°rea depende apenas do tamanho do contorno da figura.</button>
          <button class="option-btn" data-option="c">c) A √°rea permanece constante, mesmo que o per√≠metro mude.</button>
          <button class="option-btn" data-option="d">d) A √°rea diminui se a figura for muito alongada.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o pr√≥ximo desafio.</div>
    </div>
  </div>

  <!-- P5 -->
  <div class="question-card locked" data-correct="a" data-character="princesa">
    <div class="avatar">
      <img src="princesa_perimetro.png" alt="Princesa P. Er√≠metro">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Princesa P. Er√≠metro:</div>
        <div class="question-stem">
          ‚ÄúPreciso saber se √© poss√≠vel formar paralelogramos diferentes usando combina√ß√µes de apenas 3 pe√ßas do tangram. O que voc√™ acha?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) √â poss√≠vel formar paralelogramos diferentes usando diferentes combina√ß√µes de pe√ßas.</button>
          <button class="option-btn" data-option="b">b) √â imposs√≠vel formar qualquer paralelogramo com menos de 5 pe√ßas.</button>
          <button class="option-btn" data-option="c">c) √â poss√≠vel formar apenas um √∫nico paralelogramo.</button>
          <button class="option-btn" data-option="d">d) S√≥ se forma paralelogramo se uma das pe√ßas for o quadrado.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o pr√≥ximo desafio.</div>
    </div>
  </div>

  <!-- ================== N√çVEL FEITICEIRO ================== -->
  <h2 class="level-title">
    <span class="level-badge level-feiticeiro">N√≠vel A ‚Äì Feiticeiro A.R.E.A.</span>
    <span>Racioc√≠nio aprofundado e justificativa</span>
  </h2>

  <!-- A1 -->
  <div class="question-card locked" data-correct="b" data-character="feiticeiro">
    <div class="avatar">
      <img src="feiticeiro_area.png" alt="Feiticeiro A.R.E.A.">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Feiticeiro A.R.E.A.:</div>
        <div class="question-stem">
          ‚ÄúDois tri√¢ngulos de mesma √°rea foram encaixados por um aprendiz. Ele disse: ‚ÄòSe eles t√™m o mesmo tamanho, sempre viram um quadrado quando juntamos.‚Äô Voc√™ concorda?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) Se somarmos dois tri√¢ngulos de mesma √°rea, sempre teremos a mesma √°rea de um quadrado.</button>
          <button class="option-btn" data-option="b">b) Ao juntar dois tri√¢ngulos de mesma √°rea, a √°rea total ser√° o dobro da √°rea de um dos tri√¢ngulos, mas a forma pode ser um quadrado, um ret√¢ngulo ou outra figura, dependendo de como forem encaixados.</button>
          <button class="option-btn" data-option="c">c) Dois tri√¢ngulos de mesma √°rea nunca podem formar um quadrado.</button>
          <button class="option-btn" data-option="d">d) Dois tri√¢ngulos de mesma √°rea formam obrigatoriamente um c√≠rculo.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o pr√≥ximo desafio.</div>
    </div>
  </div>

  <!-- A2 -->
  <div class="question-card locked" data-correct="b" data-character="feiticeiro">
    <div class="avatar">
      <img src="feiticeiro_area.png" alt="Feiticeiro A.R.E.A.">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Feiticeiro A.R.E.A.:</div>
        <div class="question-stem">
          ‚ÄúVoc√™ precisa provar que sabe montar um trap√©zio com as Pe√ßas M√°gicas. Como ele pode ser formado usando o tangram?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) Usando apenas o quadrado e o paralelogramo, pois trap√©zios exigem √¢ngulos retos.</button>
          <button class="option-btn" data-option="b">b) Combinando duas ou mais pe√ßas que resultem em um quadril√°tero com exatamente um par de lados paralelos ‚Äî por exemplo, unindo dois tri√¢ngulos ou misturando tri√¢ngulos com o paralelogramo.</button>
          <button class="option-btn" data-option="c">c) Apenas com o uso dos tri√¢ngulos pequenos, pois eles s√£o os √∫nicos que permitem lados paralelos.</button>
          <button class="option-btn" data-option="d">d) Apenas usando as sete pe√ßas do tangram ao mesmo tempo.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o pr√≥ximo desafio.</div>
    </div>
  </div>

  <!-- A3 -->
  <div class="question-card locked" data-correct="a" data-character="feiticeiro">
    <div class="avatar">
      <img src="feiticeiro_area.png" alt="Feiticeiro A.R.E.A.">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Feiticeiro A.R.E.A.:</div>
        <div class="question-stem">
          ‚ÄúAlguns duvidam que seja poss√≠vel formar um trap√©zio usando apenas duas pe√ßas do tangram. O que voc√™ diria sobre essa afirma√ß√£o?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) A afirma√ß√£o est√° correta: √© poss√≠vel formar um trap√©zio unindo duas ou mais pe√ßas que produzam um quadril√°tero com exatamente um par de lados paralelos.</button>
          <button class="option-btn" data-option="b">b) A afirma√ß√£o est√° incorreta: todo trap√©zio precisa ter dois pares de lados paralelos.</button>
          <button class="option-btn" data-option="c">c) A afirma√ß√£o est√° incorreta: s√≥ √© poss√≠vel formar trap√©zio usando o quadrado e o paralelogramo juntos.</button>
          <button class="option-btn" data-option="d">d) A afirma√ß√£o est√° correta apenas se o trap√©zio tiver quatro √¢ngulos retos.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Acerte para liberar o √∫ltimo desafio.</div>
    </div>
  </div>

  <!-- A4 -->
  <div class="question-card locked" data-correct="a" data-character="feiticeiro">
    <div class="avatar">
      <img src="feiticeiro_area.png" alt="Feiticeiro A.R.E.A.">
    </div>
    <div class="content">
      <div class="speech-bubble">
        <div class="character-name">Feiticeiro A.R.E.A.:</div>
        <div class="question-stem">
          ‚ÄúDesafio Final! Montei um trap√©zio usando quatro tri√¢ngulos equil√°teros. Se eu usar esses mesmos quatro tri√¢ngulos para montar um ret√¢ngulo, o que acontece com a √°rea total?‚Äù
        </div>
        <div class="options">
          <button class="option-btn" data-option="a">a) A √°rea permanece a mesma, porque ela depende da soma das pe√ßas usadas, e n√£o da forma final constru√≠da.</button>
          <button class="option-btn" data-option="b">b) A √°rea muda porque ret√¢ngulos sempre t√™m √°rea maior que trap√©zios.</button>
          <button class="option-btn" data-option="c">c) A √°rea s√≥ permanece a mesma se o ret√¢ngulo tiver os mesmos √¢ngulos do trap√©zio.</button>
          <button class="option-btn" data-option="d">d) A √°rea depende da orienta√ß√£o das pe√ßas no plano.</button>
        </div>
      </div>
      <div class="feedback"></div>
      <div class="unlock-hint">Voc√™ est√° perto de concluir o desafio!</div>
    </div>
  </div>

  <!-- MENSAGEM FINAL -->
  <div id="final-message" style="display:none;">
    <div id="final-card">
      <p>üéâ <strong>Parab√©ns, Jovem Ge√¥metra!</strong></p>
      <p>Voc√™ concluiu todos os desafio.</p>
            <img src="missao-tangramopolis.png" alt="Miss√£o conclu√≠da em Tangram√≥polis">
      <button id="restart-btn">üîÑ Recome√ßar o Desafio</button>
    </div>
  </div>

</main>

<script>
  const feedbackText = {
    mestre: {
      ok: "Muito bem, Jovem Ge√¥metra! Voc√™ compreendeu a ideia do Mestre Q. Uadrado.",
      no: "Reflita mais um pouco: observe as pe√ßas e suas propriedades com aten√ß√£o."
    },
    princesa: {
      ok: "Excelente! A Princesa P. Er√≠metro ficou satisfeita com o seu racioc√≠nio.",
      no: "Algo n√£o fechou nas medidas... pense de novo na rela√ß√£o entre forma, per√≠metro e √°rea."
    },
    feiticeiro: {
      ok: "Impressionante! Voc√™ superou mais um enigma do Feiticeiro A.R.E.A.",
      no: "O Feiticeiro ainda est√° em vantagem. Revise os conceitos de composi√ß√£o e conserva√ß√£o de √°rea."
    }
  };

  const cards = Array.from(document.querySelectorAll('.question-card'));
  const finalBox = document.getElementById('final-message');
  const restartBtn = document.getElementById('restart-btn');

  // marca todas como n√£o feitas inicialmente
  cards.forEach(card => {
    card.dataset.done = "false";
    const feedback = card.querySelector('.feedback');
    if (feedback) {
      feedback.textContent = '';
      feedback.classList.remove('ok', 'no');
    }
  });

  cards.forEach(card => {
    const correct = card.dataset.correct;
    const character = card.dataset.character;
    const options = card.querySelectorAll('.option-btn');
    const feedback = card.querySelector('.feedback');

    options.forEach(btn => {
      btn.addEventListener('click', () => {
        const chosen = btn.getAttribute('data-option');
        const alreadyDone = card.dataset.done === "true";

        // limpa estados anteriores
        options.forEach(b => b.classList.remove('correct', 'incorrect'));

        if (chosen === correct) {
          btn.classList.add('correct');
          feedback.textContent = feedbackText[character].ok;
          feedback.classList.add('ok');
          feedback.classList.remove('no');

          if (!alreadyDone) {
            card.dataset.done = "true";

            const idx = cards.indexOf(card);
            const nextCard = cards[idx + 1];

            if (nextCard) {
              nextCard.classList.remove('locked');
              setTimeout(() => {
                nextCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
              }, 400);
            } else {
              // n√£o h√° pr√≥ximo card -> mostrar mensagem final
              if (finalBox) {
                finalBox.style.display = 'block';
                setTimeout(() => {
                  finalBox.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 500);
              }
            }
          }
        } else {
          btn.classList.add('incorrect');
          feedback.textContent = feedbackText[character].no;
          feedback.classList.add('no');
          feedback.classList.remove('ok');
        }
      });
    });
  });

  if (restartBtn) {
    restartBtn.addEventListener('click', () => {
      // esconde a mensagem final
      if (finalBox) {
        finalBox.style.display = 'none';
      }

      // bloqueia todas novamente, exceto a primeira
      cards.forEach((card, index) => {
        card.dataset.done = "false";
        card.classList.add('locked');
        const feedback = card.querySelector('.feedback');
        if (feedback) {
          feedback.textContent = '';
          feedback.classList.remove('ok', 'no');
        }
        card.querySelectorAll('.option-btn').forEach(btn => {
          btn.classList.remove('correct', 'incorrect');
        });
        if (index === 0) {
          card.classList.remove('locked');
        }
      });

      // volta ao topo do jogo
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  }
</script>
</body>
</html>
